<!DOCTYPE html>
<html lang="id">
<head>
Â  Â  <meta charset="UTF-8" />
Â  Â  <title>Editor Matematika Interaktif</title>
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  Â  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
Â  Â  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
Â  Â  <script id="MathJax-script" async
Â  Â  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
Â  Â  </script>
Â  Â  <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>

Â  Â  <script>
Â  Â  // Make the div with id 'Intent' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation:Â  '#Intent',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â template:Â  Â  Â  Â sagecell.templates.minimal,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'Aktifkan'});
Â  Â  // Make *any* div with class 'compute' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation: 'div.compute',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'Evaluasi'});
Â  Â  </script>

Â  Â  <script>
Â  Â  // Make the div with id 'matriks' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation:Â  '#matriks',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â template:Â  Â  Â  Â sagecell.templates.default,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'jalankan'});
Â  Â  // Make *any* div with class 'compute' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation: 'div.compute',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'Jalankan'});
Â  Â  </script>

Â  Â  <script>
Â  Â  // Make the div with id 'lucu3d' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation:Â  '#lucu3d',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â template:Â  Â  Â  Â sagecell.templates.minimal,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'aktifkan'});
Â  Â  // Make *any* div with class 'compute' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation: 'div.compute',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'aktifkan'});
Â  Â  </script>

Â  Â  <script>
Â  Â  // Make the div with id 'sikloida' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation:Â  '#sikloida',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â template:Â  Â  Â  Â sagecell.templates.minimal,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'aktifkan'});
Â  Â  // Make *any* div with class 'compute' a Sage cell
Â  Â  sagecell.makeSagecell({inputLocation: 'div.compute',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â evalButtonText: 'aktifkan'});
Â  Â  </script>

Â  Â  <script defer src="https://unpkg.com/mathlive"></script>
Â  Â  <style>
Â  Â  Â  Â  body { font-family: sans-serif; max-width: 960px; margin: auto; padding: 20px; }
Â  Â  Â  Â  .btn { padding: 8px 14px; margin: 5px 5px 10px 0; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
Â  Â  Â  Â  .btn:hover { background: #0056b3; }
Â  Â  Â  Â  .btn-small { font-size: 12px; padding: 4px 8px; margin-top: 4px; }
Â  Â  Â  Â  .btn-delete { background: #dc3545; margin-left: 10px; }
Â  Â  Â  Â  .btn-delete:hover { background: #c82333; }
Â  Â  Â  Â  textarea { width: 100%; height: 120px; font-size: 16px; margin: 5px 0; padding: 8px; border: 1px solid #ccc; border-radius: 6px; white-space: pre-wrap; }
Â  Â  Â  Â  .preview { background: #f0f0f0; border: 1px dashed #999; padding: 10px; min-height: 40px; margin-top: 5px; }
Â  Â  Â  Â  .text-block, .mathlive-block, .sage-block { border: 1px solid #ddd; padding: 10px; border-radius: 8px; margin-bottom: 20px; background: #fefefe; position: relative; }
Â  Â  Â  Â  math-field { width: 100%; margin-top: 10px; background-color: white; color: black; border-radius: 6px; padding: 6px; font-size: 18px; }
Â  Â  Â  Â  #floatingMenu { position: fixed; top: 10px; left: 10px; z-index: 1000; }
Â  Â  Â  Â  #floatingMenu .btn { display: block; font-size: 13px; margin-bottom: 5px; }
Â  Â  Â  Â  .sage-block .sagecell_output { border-top: 1px solid #eee; margin-top: 10px; padding-top: 10px; }
Â  Â  Â  Â  .block-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
Â  Â  Â  Â  .block-header span { font-weight: bold; }
Â  Â  Â  Â  .docs-link { font-size: 14px; margin-left: 15px; color: #007bff; text-decoration: none; }
Â  Â  Â  Â  .docs-link:hover { text-decoration: underline; }

Â  Â  Â  Â  /* Running Text */
Â  Â  Â  Â  .marquee {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #444;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  font-family: 'Georgia', serif;
Â  Â  Â  Â  Â  Â  font-size: 30px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .marquee span {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  padding-left: 100%;
Â  Â  Â  Â  Â  Â  animation: marquee 15s linear infinite;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  background: linear-gradient(to right, #007bff, #00c6ff);
Â  Â  Â  Â  Â  Â  -webkit-background-clip: text;
Â  Â  Â  Â  Â  Â  color: transparent;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes marquee {
Â  Â  Â  Â  Â  Â  0% { transform: translateX(0); }
Â  Â  Â  Â  Â  Â  100% { transform: translateX(-100%); }
Â  Â  Â  Â  }

Â  Â  Â  Â  Â h1 { text-align: center; margin-bottom: 30px; }
Â  Â  Â  Â  section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
Â  Â  Â  Â  section:last-child { border-bottom: none; }
Â  Â  Â  Â  p { margin-bottom: 10px; }
Â  Â  Â  Â  ul { list-style-type: disc; margin-left: 20px; margin-bottom: 10px; }
Â  Â  Â  Â  li { margin-bottom: 5px; }
Â  Â  Â  Â  .highlight { background-color: #e6f7ff; padding: 15px; border-left: 5px solid #007bff; margin: 20px 0; border-radius: 5px; }
Â  Â  Â  Â  .btn { display: inline-block; padding: 8px 15px; margin-top: 10px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; transition: background-color 0.3s ease; }
Â  Â  Â  Â  .btn:hover { background-color: #218838; }

Â  Â  Â  Â  /* Gaya untuk garis horizontal <hr> */
Â  Â  Â  Â  hr {
Â  Â  Â  Â  Â  Â  border: none; /* Hapus border default */
Â  Â  Â  Â  Â  Â  height: 5px; /* Atur tinggi untuk membuat garis tebal */
Â  Â  Â  Â  Â  Â  background-color: #ccc; /* Beri warna pada garis */
Â  Â  Â  Â  Â  Â  margin: 20px 0; /* Tambahkan margin atas dan bawah */
Â  Â  Â  Â  }
Â  Â  </style>

</head>
<body>
<div id="floatingMenu">
Â  Â  <button class="btn" onclick="addTextBlock()">â• Teks LaTeX</button>
Â  Â  <button class="btn" onclick="addMathliveBlock()">â• MathLive</button>
Â  Â  <button class="btn" onclick="addSageCell()">â• SageMath</button>
Â  Â  <button class="btn" id="saveBtn">ğŸ’¾ Simpan Semua</button>
Â  Â  <input type="file" id="importFile" accept=".json" style="display:none" onchange="loadSession(this)" />
Â  Â  <button class="btn" onclick="document.getElementById('importFile').click()">ğŸ“‚ Impor File</button>
Â  Â  <button class="btn" onclick="localStorage.clear(); alert('Data lokal dibersihkan!')">ğŸ§¹ Bersihkan Data</button>
</div>

<div class="marquee"><span>ğŸ“„ Editor LaTeX / Markdown Dinamis + ğŸ’» SageMath Cell Interaktif + âœï¸ MathLive Editor</span></div>

<h2>Pengembangan Antarmuka Editor Matematika Dinamis Berbasis HTML</h2>

Â  Â  <div class="block">
Â  Â  Â  Â  <h2>Abstrak</h2>
Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Penggunaan teknologi web untuk pembelajaran matematika interaktif semakin relevan dalam era digital.Â 
Â  Â  Â  Â  Â  Â  Artikel ini membahas perancangan dan implementasi antarmuka berbasis HTML yang memungkinkan pengguna untukÂ 
Â  Â  Â  Â  Â  Â  menuliskan, merender, dan mengevaluasi ekspresi matematika secara dinamis. Sistem ini mengintegrasikan tigaÂ 
Â  Â  Â  Â  Â  Â  komponen utama: <strong>\(\LaTeX\) editor</strong> dengan pratinjau langsung, <strong>MathLive</strong> sebagaiÂ 
Â  Â  Â  Â  Â  Â  editor ekspresi matematis berbasis <b>WYSIWYG</b>, serta <strong>SageMath Cell</strong> sebagai lingkungan komputasiÂ 
Â  Â  Â  Â  Â  Â  simbolik. Semua komponen dirancang dalam satu dokumen HTML responsif, tata letak fleksibel, dan penambahan elemenÂ 
Â  Â  Â  Â  Â  Â  secara dinamis. Hal ini tentunya sangat mendukung untuk proses pembelajaran matematika secara interaktif yangÂ 
Â  Â  Â  Â  Â  Â  tidak hanya mengeksplorasi kemampuan <b>teoritis</b> saja, tetapi dapat mewujudkan menjadi <b>satu kesatuan</b>Â 
Â  Â  Â  Â  Â  Â  yang tak-terpisah: <b>teori</b>, <b>aplikasi (<i>real problem</i>)</b> dan <b>komputasi</b>. Tentunya, ini
Â  Â  Â  Â  Â  Â  adalah wujud nyata dari suatu <b>Laboratorium Matematika Interaktif Dinamis</b> gratis yang hanya membutuhkan
Â  Â  Â  Â  Â  Â  akses internet.
Â  Â  Â  Â  </p>
Â  Â  Â  Â  <div align="right">
Â  Â  Â  Â  Â  Â  <p><b>
Â  Â  Â  Â  Â  Â  Ù‚ÙØ§Ù„ÙÙˆØ§ÛŸ Ø³ÙØ¨Ù’Ø­ÙÙ€Ù°Ù†ÙÙƒÙ Ù„ÙØ§ Ø¹ÙÙ„Ù’Ù…Ù Ù„ÙÙ†ÙØ¢ Ø¥ÙÙ„ÙÙ‘Ø§ Ù…ÙØ§ Ø¹ÙÙ„ÙÙ‘Ù…Ù’ØªÙÙ†ÙØ¢ Û– Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†ØªÙ Ù±Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù Ù±Ù„Ù’Ø­ÙÙƒÙÙŠÙ…Ù
Â  Â  Â  Â  Â  Â  </b>
Â  Â  Â  Â  Â  Â  <br>
Â  Â  Â  Â  Â  Â  Surat Al-Baqarah (2:32)
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <hr>
Â  Â  </div>

Â  Â  Â <div class="container">
Â  Â  Â  Â  <h2>Panduan Penggunaan: Laboratorium Matematika Interaktif Dinamis Anda</h2>

Â  Â  Â  Â  <hr> <section>
Â  Â  Â  Â  Â  Â  <h2>Selamat Datang!</h2>
Â  Â  Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Â  Editor ini adalah Laboratorium Matematika interaktif yang dirancang untuk membantu Anda belajar, bereksperimen,Â 
Â  Â  Â  Â  Â  Â  Â  dan memecahkan masalah matematika dengan cara yang dinamis. Anda akan menemukan berbagai alat yang terintegrasiÂ 
Â  Â  Â  Â  Â  Â  Â  untuk menangani notasi, input, dan komputasi matematika.
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Â  Semua blok yang Anda tambahkan dan konten di dalamnya akan disimpan secara otomatis di browser Anda, sehinggaÂ 
Â  Â  Â  Â  Â  Â  Â  Anda bisa melanjutkan pekerjaan Anda bahkan setelah menutup atau me-refresh halaman. Anda juga dapat menyimpanÂ 
Â  Â  Â  Â  Â  Â  Â  seluruh sesi kerja ke file atau memuatnya kembali nanti.
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <hr> <section>
Â  Â  Â  Â  Â  Â  <h2>Menu Utama: Membuat Blok Baru</h2>
Â  Â  Â  Â  Â  Â  <p>Di pojok kiri atas layar, Anda akan melihat menu mengambang yang berisi tombol-tombol untuk menambahkan jenis blok yang berbeda ke area kerja utama Anda:</p>
Â  Â  Â  Â  Â  Â  <ul align="justify">
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>â• Teks \(\LaTeX\)</strong>: Klik ini untuk menambahkan blok di mana Anda dapat menulis teksÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  biasa dan notasi matematika menggunakan bahasa LaTeX. Ini ideal untuk membuat catatan, soal, atauÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  penjelasan yang terstruktur dan terlihat profesional.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>â• MathLive</strong>: Tombol ini menambahkan blok dengan editor matematika visual. Anda bisaÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  memasukkan rumus dan ekspresi matematika dengan mudah, seperti mengetik di editor persamaan, tanpaÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  perlu tahu sintaks \(\LaTeX\).
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>â• SageMath</strong>: Ini adalah blok paling canggih untuk melakukan perhitungan matematika.Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Anda dapat menulis dan menjalankan kode program menggunakan SageMath (berbasis Python) untuk memecahkanÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  masalah aljabar, kalkulus, statistik, dan banyak lagi. Perhitungan ini dilakukan di "cloud"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  (server internet), jadi Anda tidak perlu menginstal perangkat lunak apa pun di komputer Anda.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>ğŸ’¾ Simpan Semua</strong>: Menyimpan seluruh sesi kerja Anda (semua blok dan isinya) ke sebuahÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  file di komputer Anda (.json). Ini berguna jika Anda ingin memindahkan pekerjaan Anda ke komputer lainÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  atau membuat cadangan.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>ğŸ“‚ Impor File</strong>: Memuat sesi kerja yang sebelumnya Anda simpan dari file .json.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>ğŸ§¹ Bersihkan Data</strong>: Menghapus semua data sesi yang tersimpan di browser Anda.Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Gunakan ini jika Anda ingin memulai dari awal atau menghapus pekerjaan lama.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <hr>

Â  Â  Â  Â  <section>
Â  Â  Â  Â  Â  Â  <h2>Mengenal Berbagai Jenis Blok</h2>
Â  Â  Â  Â  Â  Â  <p>Setiap blok memiliki fungsi unik untuk pengalaman matematika Anda:</p>

Â  Â  Â  Â  Â  Â  <h3>1. Blok Teks \(\LaTeX\)</h3>
Â  Â  Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Â  Blok ini adalah kanvas Anda untuk menulis dan mempresentasikan matematika secara formal.Â 
Â  Â  Â  Â  Â  Â  Â  Anda akan melihat dua mode utama:</p>
Â  Â  Â  Â  Â  Â  <ul align="justify">
Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Mode Edit:</strong> Ini adalah area tempat Anda mengetik teks dan kode \(\LaTeX\). Misalnya,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Anda bisa mengetik <code>$\int \sin(x) dx = -\cos(x) + C$</code>.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Mode Pratinjau:</strong> Setelah Anda mengetik, klik tombol "â†”ï¸ Lihat Pratinjau"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  untuk melihat bagaimana notasi \(\LaTeX\) Anda dirender menjadi persamaan yang indah dan mudah dibaca oleh MathJax, seperti di buku teks. Anda bisa beralih kembali ke mode edit dengan tombol yang sama ("â†”ï¸ Edit Teks").</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Tombol Hapus (ğŸ—‘ï¸):</strong> Menghapus blok ini dari halaman.</li>
Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  <h3>2. Blok MathLive</h3>
Â  Â  Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Â  Blok ini dirancang untuk kemudahan dan kecepatan. Jika Anda tidak terbiasa dengan \(\LaTeX\),Â 
Â  Â  Â  Â  Â  Â  Â  ini adalah titik awal yang sempurna:</p>
Â  Â  Â  Â  Â  Â  <ul align="justify">
Â  Â  Â  Â  Â  Â  Â  Â  <li>Anda dapat mengetikkan ekspresi matematika secara langsung, dan MathLive akan secara otomatisÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  memformatnya dengan benar. Contoh: Ketik <code>sqrt(x^2 + y^2)</code> dan MathLive akan mengubahnyaÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  menjadi \(\sqrt{x^2 + y^2}\).</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>Ini sangat intuitif dan memberikan umpan balik visual langsung saat Anda membangun persamaan.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Tombol Hapus (ğŸ—‘ï¸):</strong> Menghapus blok ini.</li>
Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  <h3>3. Blok SageMath</h3>
Â  Â  Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Â  Ini adalah pusat komputasi Anda. Di sini, Anda dapat menggunakan kekuatan pemrograman dan matematika:
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <ul align="justify">
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Anda akan melihat area untuk mengetikkan kode. Misalnya, Anda bisa mengetik <code>%display latex</code>Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  (untuk menampilkan output dalam format \(\LaTeX\)) lalu <code>integrate(sin(x), x)</code> untuk menghitungÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  integral sinus x.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Klik tombol <strong>"Jalankan"</strong> (yang disediakan oleh SageMath) untuk mengeksekusi kodeÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Anda dan melihat hasilnya di bawahnya.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Tombol "ğŸ“š Dokumentasi SageMath":</strong> Tautan langsung ke dokumentasi resmi SageMathÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  untuk membantu Anda belajar lebih banyak tentang fungsi-fungsi yang tersedia.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Tombol "â• Blok Kode \(\LaTeX\) Baru":</strong> Tombol ini akan menambahkan blok teks \(\LaTeX\) baruÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  (dengan judul "Blok Kode \(\LaTeX\)") ke halaman Anda. Karena alasan keamanan teknis (yang melibatkanÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  bagaimana browser berinterinteraksi dengan layanan cloud seperti SageMath), kode dari editor SageMathÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  tidak dapat langsung disalin secara otomatis. Oleh karena itu, setelah Anda membuat blok baru ini,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  silakan <b>sorot dan salin (Ctrl+C atau Cmd+C) kode dari editor SageMath Anda, lalu tempelÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  (Ctrl+V atau Cmd+V) di blok Kode LaTeX yang baru</b>. Ini adalah cara manual yang sangat efektif untukÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  memindahkan kode Anda ke blok LaTeX untuk dokumentasi atau presentasi.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Tombol Hapus (ğŸ—‘ï¸):</strong> Menghapus blok ini.</li>
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  <p align="justify" class="highlight">
Â  Â  Â  Â  Â  Â  Â  Penggunaan SageMath ini adalah contoh nyata bagaimana Anda memanfaatkan <strong>cloud computing</strong>.Â 
Â  Â  Â  Â  Â  Â  Â  Perhitungan yang kompleks dilakukan di server jauh (di internet), bukan di komputer Anda, sehingga Anda bisaÂ 
Â  Â  Â  Â  Â  Â  Â  menggunakan alat canggih ini tanpa perlu instalasi berat atau komputer berkemampuan tinggi. Cukup denganÂ 
Â  Â  Â  Â  Â  Â  Â  koneksi internet!
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <hr>

Â  Â  Â  Â  <section>
Â  Â  Â  Â  Â  Â  <h2>Bagaimana Semua Ini Saling Terkait dalam Pembelajaran?</h2>
Â  Â  Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Â  Laboratorium ini dirancang untuk mendukung cara belajar yang modern:
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <ul align="justify">
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Belajar Formal (\(\LaTeX\)):</strong> Biasakan diri Anda dengan penulisan matematika standar.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Eksplorasi Cepat (MathLive):</strong> Coba berbagai rumus tanpa hambatan sintaks, fokus pada ide.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Komputasi dan Verifikasi (SageMath):</strong> Jalankan perhitungan kompleks, verifikasiÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  jawaban Anda, atau lihat bagaimana fungsi berperilaku. Ini adalah jembatan ke dunia <strong>AI</strong>Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  dan <strong>data science</strong>, di mana kemampuan untuk memprogram dan menganalisis secara komputasiÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  sangatlah penting.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Fleksibilitas:</strong> Anda dapat menggabungkan blok-blok ini. Misalnya, Anda bisa menghitungÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  sesuatu di SageMath, lalu menyalin kode atau hasilnya ke blok Teks \(\LaTeX\) untuk dokumentasi atau ke blokÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  MathLive untuk memodifikasi persamaan secara visual.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Pembelajaran Berbasis Proyek:</strong> Anda bisa menggunakan editor ini untuk mengerjakan proyekÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  matematika kecil, mendokumentasikan langkah-langkah, dan melakukan perhitungan, semuanya dalam satuÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  lingkungan.
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  <p align="justify">
Â  Â  Â  Â  Â  Â  Â  Dengan alat ini, Anda tidak hanya belajar matematika, tetapi juga mengembangkan keterampilan komputasiÂ 
Â  Â  Â  Â  Â  Â  Â  yang berharga untuk masa depan di era digital dan AI. Sehingga memahami matematika secara utuh "<b>teori,Â 
Â  Â  Â  Â  Â  Â  Â  aplikasi (real problem) dan komputasi menjadi satu kesatuan yang tak-terpisah</b>."
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <section>
Â  Â  Â  Â  Â  Â  <h2>1. Contoh SageMath Cell</h2>
Â  Â  <p align="justify">
Â  Â  Contoh berikut adalah hasil dari kode dalam SageMath suatu kalkulator menghitung integral tertentu danÂ 
Â  Â  juga menampilkan grafiknya. Untuk mengeksekusi tekan tombol <button>Aktifkan</button>.Anda bisa mengubah isianÂ 
Â  Â  <code>f</code> dan batas-batas integral <code>a</code> dan <code>b</code> sesuai yang anda inginkan. TekanÂ 
Â  Â  tombol Update untuk menampilkan hasil.Â 
Â  Â  </p>
Â  Â  Â  Â  <div id="Intent">
Â  Â  Â  Â  Â  Â  <script type="text/x-sage">
x=var('x')
@interact
def _(f = -2*sin(x)+x,a=-3,b=5,auto_update=False):
Â  Â  q=integrate(f,x).canonicalize_radical()
Â  Â  p=integrate(f,x,a,b)
Â  Â  r=plot([f],x,a,b,gridlines='minor',\
Â  Â  Â  Â  Â  Â  legend_label='automatic',fill = true)
Â  Â  r.show(figsize=4)
Â  Â  pretty_print(html("Nilai integral:\
Â  Â  $$\\int\\limits_{%s}^{%s}\\left(%s\\right)\\,dx=\
Â  Â  \\left.%s\\right|_{%s}^{%s}=%s\
Â  Â  \\approx %s$$"%(latex(a),latex(b),latex(f),latex(q),\
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  latex(a),latex(b),latex(p),latex(n(p)))))
Â  Â  Â  Â  Â  Â  </script>
Â  Â  Â  Â  </div>
<hr>
Â  Â  <p align="justify">
Â  Â  Â Selanjutnya kita berikan contoh membuat matriks random ukuran \(5\times 5\) yang elemen-elemennya diÂ 
Â  Â  Â \(\mathbb{Z}\), dan dihitung \(\det(A)\) serta polinomial kharakteristik dari \(A\).
Â  Â  </p>

<div id="matriks">
<script type="text/x-sage">
A = random_matrix(ZZ, 5)
d = A.det()
p = factor(A.charpoly("lambda"))

display(html(r"$A = %s"%(latex(A))))
display(html(r"$p(\lambda) = %s"%(latex(p))))
display(html(r"$\det(A) = %s"%(latex(d))))
</script>
</div>
<p align="justify">
Gambar berikut ini menampilkan animasi wajah kartun 3D yang terdiri dari bola kuning sebagai kepala,Â 
kerucut merah sebagai hidung atau topi, bola putih dan hitam sebagai mata, dan bolaÂ 
kuning kecil sebagai mulut. Objek wajah ini digabungkan dengan plot <b>3D</b> dari fungsiÂ 
matematika <code>f(x, y) = exp(x/5)*cos(y)</code>, yang ditampilkan dengan gradasi warna merah dan kuning.Â 
Seluruh adegan <b>3D</b> ini ditampilkan tanpa bingkai. Klik tombol <button>Aktifkan</button>!
</p>
<div id="lucu3d">
<script type="text/x-sage">
from sage.plot.plot3d.shapes import Cone
import math
from sage.plot.animate import animate

# Definisi objek
S = sphere(size=.5, color='yellow')
S += Cone(.5, .5, color='red').translate(0,0,.3)

S += sphere((.45, -.1, .15), size=.1, color='white')
S += sphere((.51,-.1,.17), size=.05, color='black')
S += sphere((.45, .1, .15), size=.1, color='white')
S += sphere((.51, .1,.17), size=.05, color='black')
S += sphere((.5, 0, -.2), size=.1, color='yellow')

# Fungsi permukaan
def f(x, y): return math.exp(x/5)*math.cos(y)
P = plot3d(f, (-5, 5), (-5, 5), adaptive=True,
Â  Â  Â  Â  Â  Â color=['red','yellow'], max_depth=10)

# Gabungkan objek dasar
combined_object = P.scale(.2) + S.translate(1, 0, 0)

# Animasi: rotasi dan naik-turun
frames = []
for angle in srange(0, 2*pi, pi/20):Â  # lebih banyak frame untuk animasi halus
Â  Â  z_shift = 2 * math.sin(8 * angle)Â  # naik turun seperti gelombang
Â  Â  rotated = combined_object.rotateZ(angle).translate(0, 0, z_shift)
Â  Â  frames.append(rotated)

# Tampilkan animasi
animation = animate(frames, aspect_ratio=[1,1,1], frame=False, figsize=[9,9])
animation.show()
</script>
</div>
<hr>
<h2>ğŸ“ Animasi Gerak Sikloida</h2>

<h3>1. Definisi Sikloida</h3>

<p align="justify">
Kurva <strong>sikloida</strong> adalah jejak lintasan yang dilalui oleh sebuahÂ 
<strong>titik tetap pada keliling sebuah lingkaran</strong> yangÂ 
<strong>menggelinding tanpa slip</strong> (tanpa selip) di sepanjang garis lurus datar.Â 
Jika lingkaran menggelinding ke kanan di atas sumbu-x, maka lintasan titik tersebut membentukÂ 
kurva parametris:
</p>

$$
x(t) = t - \sin(t), \quad y(t) = 1 - \cos(t)
$$

<p align="justify">
di mana \( t \) merepresentasikan sudut rotasi lingkaran (dalam radian) saat menggelinding,Â 
dan jari-jari lingkaran dianggap \( r = 1 \) (dapat digeneralisasi).
</p>

<hr>

<h3>2. Komponen-Komponen dalam Kode</h3>

<h4>a. Kurva Sikloida</h4>

<pre><code>sikloida = parametric_plot((t - sin(t), 1 - cos(t)), (t, 0, s), thickness=3)
</code></pre>

<p align="justify">
Bagian ini menggambarkan <strong>jejak sikloida</strong> dari \( t = 0 \) hingga \( t = s \),Â 
seiring waktu (atau sudut rotasi) \( s \) bertambah. Ini adalah lintasan <strong>historis</strong>Â 
dari titik yang menempel di lingkaran.
</p>

<hr>

<h4>b. Lingkaran Menggelinding</h4>

<pre><code>lingkaran = circle((s, 1), 1, ...)
</code></pre>

<p align="justify">
Lingkaran digambarkan dengan pusat di titik \( (s, 1) \), artinya lingkaran bergulir ke kanan sejauh \( s \)Â 
sepanjang sumbu-x dan tetap berada di atas garis \( y = 1 \) (karena jari-jarinya 1).Â 
Ini mencerminkan <strong>gerak translasi</strong> dari pusat lingkaran.
</p>

<hr>

<h4>c. Titik Tetap di Keliling</h4>

<pre><code>t_sikloida = (s - sin(s), 1 - cos(s))
</code></pre>

<p align="justify">
Titik ini adalah posisi <strong>aktual</strong> dari titik yang berada di tepi lingkaranâ€”mengikuti persamaan sikloida.Â 
Ini adalah titik yang melacak jalur sikloida seiring waktu. Silahkan tekan tombol <button>Aktifkan</button>!
</p>

<div id="sikloida">
<script type="text/x-sage">
#Animasi sikloida

a = 0.2
v = []
t = var("t")
for s in srange(0.01, 4.0*pi, a):
Â  Â  sikloida = parametric_plot((t-sin(t),1-cos(t)), (t, 0, s),thickness=3)
Â  Â  t_sikloida = (s-sin(s),1-cos(s))
Â  Â  lingkaran = circle((s,1),1,thickness=2,rgbcolor='green')
Â  Â  lingkaran1 = circle((s,1),0.5,thickness=4,fill=True,edgecolor='red')
Â  Â  titik = point(t_sikloida, pointsize=90, rgbcolor="brown")
Â  Â  garis = line([(s, 1),t_sikloida], thickness=4,color="red")
Â  Â  v.append(sikloida + lingkaran + lingkaran1 + titik + garis)
a = animate(v, figsize=[10,2], aspect_ratio=1, xmin=0.5,xmax=14, ymin=0, ymax=2.2)Â  Â Â 
show(a)
</script>
</div>

<h2>ğŸ” Simulasi Kriptografi Hybrid: ECDH + "AES" (Hash XOR)</h2>
<p>Simulasi ini menunjukkan pertukaran kunci ECDH dan enkripsi sederhana menggunakan <code>hash XOR</code> (bukan AES asli karena keterbatasan lingkungan).</p>

<script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
<script>
Â  Â  sagecell.makeSagecell({
Â  Â  Â  Â  inputLocation: "#sagemath-ecc",
Â  Â  Â  Â  template: sagecell.templates.interact,
Â  Â  Â  Â  evalButtonText: "ğŸ” Jalankan Simulasi",
        // Tambahkan baris ini untuk opsi bahasa
Â  Â  Â  Â  languages: ['sage', 'python'],
        // Anda juga bisa mengatur bahasa default
        defaultLanguage: 'python',
Â  Â  Â  Â  linked: true
Â  Â  });
</script>

<div id="sagemath-ecc">
<textarea>
@interact
def _(pesan=input_box("Halo Bob, ini pesan rahasia dari Alice", width=60),
Â  Â  Â  langkah=selector(['1. Buat Kunci ECC',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '2. Derivasi Kunci Rahasia',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '3. Enkripsi (Simulasi XOR)',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '4. Dekripsi (Simulasi XOR)'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â label="Pilih Langkah:", buttons=True)):

Â  Â  import hashlib
Â  Â  import base64
Â  Â Â 
Â  Â  # Langkah 1: Buat Kunci ECC
Â  Â  F = FiniteField(2^127 - 1)
Â  Â  E = EllipticCurve(F, [1, 1])
Â  Â  G = E.random_point()
Â  Â Â 
Â  Â  a_priv = randint(2, 10^5)
Â  Â  b_priv = randint(2, 10^5)
Â  Â  A = a_priv * G
Â  Â  B = b_priv * G
Â  Â Â 
Â  Â  # Langkah 2: ECDH
Â  Â  S_a = a_priv * B
Â  Â  S_b = b_priv * A
Â  Â  secret_x = S_a[0]
Â  Â Â 
Â  Â  key = hashlib.sha256(str(secret_x).encode()).digest()
Â  Â Â 
Â  Â  def xor_bytes(m_bytes, k_bytes):
Â  Â  Â  Â  return bytes([mb ^ kb for mb, kb in zip(m_bytes, k_bytes)])

Â  Â  if langkah == 0:
Â  Â  Â  Â  pretty_print(html(f"<b>Alice publik:</b> {A}<br><b>Bob publik:</b> {B}"))

Â  Â  elif langkah == 1:
Â  Â  Â  Â  pretty_print(html(f"<b>Shared Point:</b> {S_a}"))
Â  Â  Â  Â  pretty_print(html(f"<b>Kunci Rahasia (SHA-256 dari x):</b><br><code>{key.hex()}</code>"))

Â  Â  elif langkah == 2:
Â  Â  Â  Â  msg_bytes = pesan.encode()
Â  Â  Â  Â  encrypted = xor_bytes(msg_bytes, key[:len(msg_bytes)])
Â  Â  Â  Â  enc_b64 = base64.b64encode(encrypted).decode()
Â  Â  Â  Â  pretty_print(html(f"<b>Pesan Terenkripsi (base64):</b><br><code>{enc_b64}</code>"))

Â  Â  elif langkah == 3:
Â  Â  Â  Â  msg_bytes = pesan.encode()
Â  Â  Â  Â  encrypted = xor_bytes(msg_bytes, key[:len(msg_bytes)])
Â  Â  Â  Â  decrypted = xor_bytes(encrypted, key[:len(msg_bytes)])
Â  Â  Â  Â  pretty_print(html(f"<b>Pesan Terdekripsi oleh Bob:</b><br><code>{decrypted.decode()}</code>"))
</textarea>
</div>


<hr>Â  Â  Â  Â Â 

<h2>2. Tambahkan Konten Dinamis (Pilih: Teks \(\LaTeX\), MathLive atau SageMath!)</h2>
Â  Â Â 
Â  Â  <p align="justify">
Â  Â  Di pojok kiri atas halaman ini, Anda akan menemukan beberapa tombol mengambang yang berfungsi untuk menambahkanÂ 
Â  Â  beragam jenis konten editor secara dinamis. Tombol-tombol ini dirancang untuk memudahkan Anda mengorganisir danÂ 
Â  Â  berinteraksi dengan materi pembelajaran atau penelitian matematika.
Â  Â  </p>
<hr>
</section>

Â  Â  </div>

<div id="dynamicArea"></div>

<script>
// Fungsi untuk menyimpan instance CodeMirror agar mudah diakses
const sageCellInstances = new Map();Â 

// Fungsi untuk merender MathJax
function renderMath(inputEl, outputEl) {
Â  Â  outputEl.innerHTML = inputEl.value;
Â  Â  MathJax.typesetPromise([outputEl]);
}

// Fungsi untuk beralih antara mode edit dan pratinjau untuk LaTeX
function toggleEditPreview(button, editorId, previewId) {
Â  Â  const editorEl = document.getElementById(editorId);
Â  Â  const previewEl = document.getElementById(previewId);
Â  Â  if (editorEl.style.display === "none") {
Â  Â  Â  Â  editorEl.style.display = "block";
Â  Â  Â  Â  previewEl.style.display = "none";
Â  Â  Â  Â  button.textContent = "â†”ï¸ Lihat Pratinjau";
Â  Â  } else {
Â  Â  Â  Â  editorEl.style.display = "none";
Â  Â  Â  Â  previewEl.style.display = "block";
Â  Â  Â  Â  button.textContent = "â†”ï¸ Edit Teks";
Â  Â  Â  Â  renderMath(editorEl, previewEl);
Â  Â  }
}

// Fungsi untuk menghapus blok
function deleteBlock(element) {
Â  Â  if (confirm("Apakah Anda yakin ingin menghapus blok ini?")) {
Â  Â  Â  Â  const blockToRemove = element.closest('.text-block, .mathlive-block, .sage-block');
Â  Â  Â  Â  if (blockToRemove && blockToRemove.classList.contains('sage-block')) {
Â  Â  Â  Â  Â  Â  const sageInputDiv = blockToRemove.querySelector('.sage-input');
Â  Â  Â  Â  Â  Â  if (sageInputDiv && sageCellInstances.has(sageInputDiv)) {
Â  Â  Â  Â  Â  Â  Â  Â  sageCellInstances.delete(sageInputDiv);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  blockToRemove.remove();
Â  Â  }
}

// Fungsi untuk menambahkan blok Teks LaTeX
// Parameter 'titleText' ditambahkan untuk memungkinkan judul yang berbeda
function addTextBlock(content = '', idOverride = '', previewShown = false, titleText = 'Blok Teks LaTeX') {
Â  Â  const container = document.getElementById("dynamicArea");
Â  Â  const block = document.createElement("div");
Â  Â  block.className = "text-block";
Â  Â Â 
Â  Â  const header = document.createElement("div");
Â  Â  header.className = "block-header";
Â  Â  const title = document.createElement("span");
Â  Â  title.textContent = titleText; // Menggunakan parameter titleText
Â  Â  header.appendChild(title);
Â  Â Â 
Â  Â  const deleteBtn = document.createElement("button");
Â  Â  deleteBtn.className = "btn btn-small btn-delete";
Â  Â  deleteBtn.textContent = "ğŸ—‘ï¸ Hapus";
Â  Â  deleteBtn.onclick = () => deleteBlock(deleteBtn);
Â  Â  header.appendChild(deleteBtn);
Â  Â  block.appendChild(header);

Â  Â  const ta = document.createElement("textarea");
Â  Â  const prev = document.createElement("div");
Â  Â  prev.className = "preview";
Â  Â  const uniqueId = idOverride || `editor-${Date.now()}`;
Â  Â  ta.id = uniqueId;
Â  Â  prev.id = "preview-" + uniqueId;
Â  Â  ta.value = content || localStorage.getItem(ta.id) || "";
Â  Â  prev.style.display = previewShown ? "block" : "none";
Â  Â  ta.style.display = previewShown ? "none" : "block";
Â  Â  renderMath(ta, prev);

Â  Â  ta.addEventListener("input", () => {
Â  Â  Â  Â  renderMath(ta, prev);
Â  Â  Â  Â  localStorage.setItem(ta.id, ta.value);
Â  Â  });

Â  Â  const toggleBtn = document.createElement("button");
Â  Â  toggleBtn.className = "btn-small";
Â  Â  toggleBtn.textContent = previewShown ? "â†”ï¸ Lihat Pratinjau" : "â†”ï¸ Edit Teks";
Â  Â  toggleBtn.onclick = () => toggleEditPreview(toggleBtn, ta.id, prev.id);
Â  Â Â 
Â  Â  block.appendChild(ta);
Â  Â  block.appendChild(prev);
Â  Â  block.appendChild(toggleBtn);
Â  Â  container.appendChild(block);
}

// Fungsi baru untuk menambahkan blok Teks LaTeX yang berasal dari SageMath
function addTextBlockFromSage(content = '', idOverride = '', previewShown = false) {
Â  Â  // Panggil addTextBlock dengan judul yang berbeda
Â  Â  addTextBlock(content, idOverride, previewShown, 'Blok Kode LaTeX');Â 
}


// Fungsi untuk menambahkan blok MathLive
function addMathliveBlock(content = '', idOverride = '') {
Â  Â  const container = document.getElementById("dynamicArea");
Â  Â  const block = document.createElement("div");
Â  Â  block.className = "mathlive-block";

Â  Â  const header = document.createElement("div");
Â  Â  header.className = "block-header";
Â  Â  const title = document.createElement("span");
Â  Â  title.textContent = "Blok MathLive";
Â  Â  header.appendChild(title);

Â  Â  const deleteBtn = document.createElement("button");
Â  Â  deleteBtn.className = "btn btn-small btn-delete";
Â  Â  deleteBtn.textContent = "ğŸ—‘ï¸ Hapus";
Â  Â  deleteBtn.onclick = () => deleteBlock(deleteBtn);
Â  Â  header.appendChild(deleteBtn);
Â  Â  block.appendChild(header);

Â  Â  const mf = document.createElement("math-field");
Â  Â  mf.setAttribute("virtual-keyboard-mode", "onfocus");
Â  Â  const uniqueId = idOverride || `mathlive-${Date.now()}`;
Â  Â  mf.id = uniqueId;
Â  Â  mf.value = content || localStorage.getItem(mf.id) || "";
Â  Â  mf.addEventListener("input", () => localStorage.setItem(mf.id, mf.value));
Â  Â Â 
Â  Â  block.appendChild(mf);
Â  Â  container.appendChild(block);
}

// Fungsi untuk menambahkan blok SageMath
function addSageCell(content = '') {
Â  Â  const container = document.getElementById("dynamicArea");
Â  Â  const cellDiv = document.createElement("div");
Â  Â  cellDiv.className = "sage-block compute";

Â  Â  const header = document.createElement("div");
Â  Â  header.className = "block-header";
Â  Â  const title = document.createElement("span");
Â  Â  title.textContent = "Blok SageMath";
Â  Â  header.appendChild(title);

Â  Â  const docsLink = document.createElement("a");
Â  Â  docsLink.href = "https://doc.sagemath.org/";
Â  Â  docsLink.target = "_blank";
Â  Â  docsLink.className = "docs-link";
Â  Â  docsLink.textContent = "ğŸ“š Dokumentasi SageMath";
Â  Â  header.appendChild(docsLink);

Â  Â  const latexCodeBtn = document.createElement("button");
Â  Â  latexCodeBtn.className = "btn btn-small";
Â  Â  latexCodeBtn.textContent = "â• Blok Kode LaTeX Baru";
Â  Â  latexCodeBtn.onclick = () => {
Â  Â  Â  Â  // Dapatkan instance CodeMirror untuk sel Sage saat ini
Â  Â  Â  Â  const sageInputDiv = cellDiv.querySelector('.sagecell_input');
Â  Â  Â  Â  if (sageInputDiv && sageCellInstances.has(sageInputDiv)) {
Â  Â  Â  Â  Â  Â  const cm = sageCellInstances.get(sageInputDiv);
Â  Â  Â  Â  Â  Â  const codeContent = cm.getValue();
Â  Â  Â  Â  Â  Â  addTextBlockFromSage(`\`\`\`python\n${codeContent}\n\`\`\``); // Tambahkan dengan judul baru
Â  Â  Â  Â  Â  Â  alert("Kode dari SageMath telah ditambahkan ke blok Kode LaTeX baru. Mohon salin dan tempel (Ctrl+C / Cmd+C) dari editor SageMath ke blok Kode LaTeX yang baru.");
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  addTextBlockFromSage(''); // Tambahkan blok kosong jika tidak ada kode
Â  Â  Â  Â  Â  Â  alert("Blok Kode LaTeX baru telah ditambahkan. Silakan salin dan tempel kode dari editor SageMath Anda ke dalamnya secara manual.");
Â  Â  Â  Â  }
Â  Â  };
Â  Â  header.appendChild(latexCodeBtn);


Â  Â  const deleteBtn = document.createElement("button");
Â  Â  deleteBtn.className = "btn btn-small btn-delete";
Â  Â  deleteBtn.textContent = "ğŸ—‘ï¸ Hapus";
Â  Â  deleteBtn.onclick = () => deleteBlock(deleteBtn);
Â  Â  header.appendChild(deleteBtn);
Â  Â  block.appendChild(header);

Â  Â  const textarea = document.createElement("textarea");
Â  Â  textarea.value = content || "";
Â  Â  cellDiv.appendChild(textarea);
Â  Â  container.appendChild(cellDiv);

Â  Â  // Menggunakan div temporary untuk mendapatkan ID unik yang akan digunakan SageCell
Â  Â  const tempDiv = document.createElement('div');
Â  Â  container.appendChild(tempDiv);
Â  Â  const uniqueId = `sagecell-${Date.now()}`;
Â  Â  tempDiv.id = uniqueId;
Â  Â  tempDiv.style.display = 'none'; // Sembunyikan div temporary

Â  Â  // Panggil makeSagecell di div temporary, kemudian pindahkan elemen input dari sana
Â  Â  sagecell.makeSagecell({
Â  Â  Â  Â  inputLocation: `#${uniqueId}`,
Â  Â  Â  Â  template: sagecell.templates.default,
Â  Â  Â  Â  evalButtonText: 'Jalankan',
Â  Â  Â  Â  autoeval: true,
Â  Â  Â  Â  // BARIS PENTING: Tambahkan opsi bahasa di sini
Â  Â  Â  Â  languages: ['sage', 'python'], // Menambahkan 'python' sebagai pilihan bahasa
Â  Â  Â  Â  defaultLanguage: 'sage', // Atau 'python' jika Anda ingin default ke Python
Â  Â  Â  Â  autoeval: true, // Auto-evaluate agar konten dari file JSON langsung dieksekusi
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Callback setelah sel Sage dibuat
Â  Â  Â  Â  callback: function(sagecell) {
Â  Â  Â  Â  Â  Â  // Pindahkan elemen-elemen yang dihasilkan SageCell ke cellDiv yang sebenarnya
Â  Â  Â  Â  Â  Â  const inputDiv = sagecell.inputdiv[0];
Â  Â  Â  Â  Â  Â  const outputDiv = sagecell.outputdiv[0];
Â  Â  Â  Â  Â  Â  cellDiv.appendChild(inputDiv);
Â  Â  Â  Â  Â  Â  cellDiv.appendChild(outputDiv);
Â  Â  Â  Â  Â  Â  tempDiv.remove(); // Hapus div temporary

Â  Â  Â  Â  Â  Â  // Simpan instance CodeMirror untuk akses nanti (misalnya untuk tombol copy ke LaTeX)
Â  Â  Â  Â  Â  Â  if (sagecell.editor) {
Â  Â  Â  Â  Â  Â  Â  Â  sageCellInstances.set(inputDiv, sagecell.editor);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  });
}

// Fungsi untuk menyimpan sesi
function saveSession() {
Â  Â  const blocks = [];
Â  Â  document.querySelectorAll('.text-block, .mathlive-block, .sage-block').forEach(block => {
Â  Â  Â  Â  if (block.classList.contains('text-block')) {
Â  Â  Â  Â  Â  Â  const editorEl = block.querySelector('textarea');
Â  Â  Â  Â  Â  Â  const previewEl = block.querySelector('.preview');
Â  Â  Â  Â  Â  Â  blocks.push({
Â  Â  Â  Â  Â  Â  Â  Â  type: 'text',
Â  Â  Â  Â  Â  Â  Â  Â  content: editorEl.value,
Â  Â  Â  Â  Â  Â  Â  Â  previewShown: previewEl.style.display !== 'none',
Â  Â  Â  Â  Â  Â  Â  Â  title: block.querySelector('.block-header span').textContent // Ambil judul blok
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  } else if (block.classList.contains('mathlive-block')) {
Â  Â  Â  Â  Â  Â  blocks.push({
Â  Â  Â  Â  Â  Â  Â  Â  type: 'mathlive',
Â  Â  Â  Â  Â  Â  Â  Â  content: block.querySelector('math-field').value
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  } else if (block.classList.contains('sage-block')) {
Â  Â  Â  Â  Â  Â  // Untuk SageCell, kita perlu mendapatkan konten dari CodeMirror instance
Â  Â  Â  Â  Â  Â  const sageInputDiv = block.querySelector('.sagecell_input');
Â  Â  Â  Â  Â  Â  if (sageInputDiv && sageCellInstances.has(sageInputDiv)) {
Â  Â  Â  Â  Â  Â  Â  Â  const cm = sageCellInstances.get(sageInputDiv);
Â  Â  Â  Â  Â  Â  Â  Â  blocks.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'sage',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content: cm.getValue()
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // Simpan juga semua konten textarea lama yang memiliki ID di local storage
Â  Â  const allTextareas = document.querySelectorAll('textarea[id^="editor-"]');
Â  Â  allTextareas.forEach(ta => {
Â  Â  Â  Â  localStorage.setItem(ta.id, ta.value);
Â  Â  });
Â  Â  // Simpan juga semua konten math-field lama yang memiliki ID di local storage
Â  Â  const allMathFields = document.querySelectorAll('math-field[id^="mathlive-"]');
Â  Â  allMathFields.forEach(mf => {
Â  Â  Â  Â  localStorage.setItem(mf.id, mf.value);
Â  Â  });

Â  Â  const data = JSON.stringify(blocks);
Â  Â  const blob = new Blob([data], { type: 'application/json' });
Â  Â  const url = URL.createObjectURL(blob);
Â  Â  const a = document.createElement('a');
Â  Â  a.href = url;
Â  Â  a.download = 'matematika_interaktif_sesi.json';
Â  Â  document.body.appendChild(a);
Â  Â  a.click();
Â  Â  document.body.removeChild(a);
Â  Â  URL.revokeObjectURL(url);
Â  Â  alert("Sesi berhasil disimpan!");
}

// Fungsi untuk memuat sesi dari file
function loadSession(event) {
Â  Â  const file = event.target.files[0];
Â  Â  if (!file) {
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  const reader = new FileReader();
Â  Â  reader.onload = (e) => {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const blocks = JSON.parse(e.target.result);
Â  Â  Â  Â  Â  Â  document.getElementById("dynamicArea").innerHTML = ''; // Bersihkan area saat ini
Â  Â  Â  Â  Â  Â  blocks.forEach(blockData => {
Â  Â  Â  Â  Â  Â  Â  Â  if (blockData.type === 'text') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Periksa apakah judul "Blok Kode LaTeX"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (blockData.title === 'Blok Kode LaTeX') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addTextBlockFromSage(blockData.content, '', blockData.previewShown);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addTextBlock(blockData.content, '', blockData.previewShown, blockData.title);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else if (blockData.type === 'mathlive') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMathliveBlock(blockData.content);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (blockData.type === 'sage') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addSageCell(blockData.content);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  alert("Sesi berhasil dimuat!");
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error("Gagal memuat sesi:", error);
Â  Â  Â  Â  Â  Â  alert("Gagal memuat sesi. File mungkin rusak atau tidak valid.");
Â  Â  Â  Â  }
Â  Â  };
Â  Â  reader.readAsText(file);
}

// Tambahkan event listener untuk tombol save
document.getElementById('saveBtn').addEventListener('click', saveSession);

// Memuat sesi dari local storage saat halaman dimuat
window.addEventListener('load', () => {
Â  Â  // Untuk sel SageMath yang ada di HTML statis, kita perlu menginisialisasinya secara manual
Â  Â  // dengan menyimpan instance CodeMirror mereka jika perlu.
Â  Â  // Namun, karena `makeSagecell` sudah dipanggil untuk `#Intent`, `#matriks`, `#lucu3d`, `#sikloida`, dan `#sagemath-ecc`
Â  Â  // di awal script, dan mereka bukan bagian dari `dynamicArea`, kita tidak perlu memuat ulang mereka
Â  Â  // dari `localStorage` atau `JSON` melalui fungsi `loadSession`.
Â  Â  // `loadSession` hanya akan menangani blok yang ditambahkan secara dinamis.

Â  Â  // Initial setup for static SageCells if their CodeMirror instance is needed later
Â  Â  // (e.g., for copy to LaTeX button functionality if you were to implement it for static cells).
Â  Â  // This part is more complex as it requires intercepting the SageCell initialization.
Â  Â  // For now, the copy to LaTeX functionality is primarily for dynamically added cells.

});
</script>
</body>
</html>
